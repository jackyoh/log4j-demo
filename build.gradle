import java.io.File;
import java.nio.file.Files;
import java.nio.file.FileSystems;
import java.nio.file.Paths;

apply plugin: 'java'

repositories {
  mavenCentral()  
}

dependencies {
  compile('org.apache.kafka:kafka-log4j-appender:1.1.0')
  compile('org.apache.logging.log4j:log4j-api:2.1')
  compile('org.apache.logging.log4j:log4j-core:2.1')
}

jar {
  configurations.compile.each { File path ->
    String buildJarFolder = "build/lib"
    if(!new File(buildJarFolder).exists()){
      new File(buildJarFolder).mkdirs();
    }
    String newJarFilePath = buildJarFolder + "/" + path.name
    if(!new File(newJarFilePath).exists()){
      Files.copy(path.toPath(), FileSystems.getDefault().getPath(newJarFilePath))
    }

  }
}
